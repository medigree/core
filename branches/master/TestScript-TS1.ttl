@prefix fhir: <http://hl7.org/fhir/> .
@prefix owl: <http://www.w3.org/2002/07/owl#> .
@prefix rdfs: <http://www.w3.org/2000/01/rdf-schema#> .
@prefix xsd: <http://www.w3.org/2001/XMLSchema#> .

# - resource -------------------------------------------------------------------

<http://medigree.net/fhir/fhir-testing/TestScript/TS1> a fhir:TestScript;
  fhir:nodeRole fhir:treeRoot;
  fhir:Resource.id [ fhir:value "TS1"];
  fhir:DomainResource.text [
     fhir:Narrative.status [ fhir:value "generated" ];
     fhir:Narrative.div "<div xmlns=\"http://www.w3.org/1999/xhtml\"><p><b>Generated Narrative</b></p><div style=\"display: inline-block; background-color: #d9e0e7; padding: 6px; margin: 4px; border: 1px solid #8da1b4; border-radius: 5px; line-height: 60%\"><p style=\"margin-bottom: 0px\">Resource \"TS1\" </p></div><p><b>url</b>: <code>medigree.net/fhir/testing/testscript-1</code></p><p><b>version</b>: 1.0.0</p><p><b>name</b>: A test script</p><p><b>status</b>: active</p><p><b>date</b>: 2022-06-04 02:11:26+0000</p><p><b>publisher</b>: My Organization</p><p><b>contact</b>: My Organization: <a href=\"http://medigree.net\">http://medigree.net</a>,<a href=\"mailto:my-group@example.com\">my-group@example.com</a>, Bob Smith: <a href=\"mailto:bobsmith@example.com\">bobsmith@example.com</a></p><p><b>jurisdiction</b>: World <span style=\"background: LightGoldenRodYellow; margin: 4px; border: 1px solid khaki\"> (m49.htm#001)</span></p><blockquote><p><b>test</b></p><p><b>name</b>: CapabilityStatement</p><p><b>description</b>: Get a server's CapabilityStatement and validate response.</p><blockquote><p><b>action</b></p><h3>Operations</h3><table class=\"grid\"><tr><td>-</td><td><b>Type</b></td><td><b>Description</b></td><td><b>Accept</b></td><td><b>EncodeRequestUrl</b></td><td><b>Params</b></td><td><b>Url</b></td></tr><tr><td>*</td><td>Read (Details: http://terminology.hl7.org/CodeSystem/testscript-operation-codes code read = 'Read', stated as 'null')</td><td>Get the server's metadata</td><td>xml</td><td>true</td><td>?_format=xml</td><td>http://test.fhir.org/r4/metadata</td></tr></table></blockquote><blockquote><p><b>action</b></p><h3>Asserts</h3><table class=\"grid\"><tr><td>-</td><td><b>Description</b></td><td><b>Response</b></td><td><b>WarningOnly</b></td></tr><tr><td>*</td><td>Confirm that the returned HTTP status is 200(OK).</td><td>okay</td><td>false</td></tr></table></blockquote><blockquote><p><b>action</b></p><h3>Asserts</h3><table class=\"grid\"><tr><td>-</td><td><b>Description</b></td><td><b>ContentType</b></td><td><b>WarningOnly</b></td></tr><tr><td>*</td><td>Confirm that the returned format is XML.</td><td>xml</td><td>false</td></tr></table></blockquote><blockquote><p><b>action</b></p><h3>Asserts</h3><table class=\"grid\"><tr><td>-</td><td><b>Description</b></td><td><b>Resource</b></td><td><b>WarningOnly</b></td></tr><tr><td>*</td><td>Confirm that the returned resource type is CapabilityStatement.</td><td>Bundle</td><td>false</td></tr></table></blockquote></blockquote></div>"
  ];
  fhir:TestScript.url [ fhir:value "medigree.net/fhir/testing/testscript-1"];
  fhir:TestScript.version [ fhir:value "1.0.0"];
  fhir:TestScript.name [ fhir:value "A test script"];
  fhir:TestScript.status [ fhir:value "active"];
  fhir:TestScript.date [ fhir:value "2022-06-04T14:11:26+00:00"^^xsd:dateTime];
  fhir:TestScript.publisher [ fhir:value "My Organization"];
  fhir:TestScript.contact [
     fhir:index 0;
     fhir:ContactDetail.name [ fhir:value "My Organization" ];
     fhir:ContactDetail.telecom [
       fhir:index 0;
       fhir:ContactPoint.system [ fhir:value "url" ];
       fhir:ContactPoint.value [ fhir:value "http://medigree.net" ]
     ], [
       fhir:index 1;
       fhir:ContactPoint.system [ fhir:value "email" ];
       fhir:ContactPoint.value [ fhir:value "my-group@example.com" ]
     ]
  ], [
     fhir:index 1;
     fhir:ContactDetail.name [ fhir:value "Bob Smith" ];
     fhir:ContactDetail.telecom [
       fhir:index 0;
       fhir:ContactPoint.system [ fhir:value "email" ];
       fhir:ContactPoint.value [ fhir:value "bobsmith@example.com" ];
       fhir:ContactPoint.use [ fhir:value "work" ]
     ]
  ];
  fhir:TestScript.jurisdiction [
     fhir:index 0;
     fhir:CodeableConcept.coding [
       fhir:index 0;
       fhir:Coding.system [ fhir:value "http://unstats.un.org/unsd/methods/m49/m49.htm" ];
       fhir:Coding.code [ fhir:value "001" ];
       fhir:Coding.display [ fhir:value "World" ]
     ]
  ];
  fhir:TestScript.test [
     fhir:index 0;
     fhir:TestScript.test.name [ fhir:value "CapabilityStatement" ];
     fhir:TestScript.test.description [ fhir:value "Get a server's CapabilityStatement and validate response." ];
     fhir:TestScript.test.action [
       fhir:index 0;
       fhir:TestScript.test.action.operation [
         fhir:TestScript.setup.action.operation.type [
           fhir:Coding.system [ fhir:value "http://terminology.hl7.org/CodeSystem/testscript-operation-codes" ];
           fhir:Coding.code [ fhir:value "read" ]
         ];
         fhir:TestScript.setup.action.operation.description [ fhir:value "Get the server's metadata" ];
         fhir:TestScript.setup.action.operation.accept [ fhir:value "xml" ];
         fhir:TestScript.setup.action.operation.encodeRequestUrl [ fhir:value "true"^^xsd:boolean ];
         fhir:TestScript.setup.action.operation.params [ fhir:value "?_format=xml" ];
         fhir:TestScript.setup.action.operation.url [ fhir:value "http://test.fhir.org/r4/metadata" ]
       ]
     ], [
       fhir:index 1;
       fhir:TestScript.test.action.assert [
         fhir:TestScript.setup.action.assert.description [ fhir:value "Confirm that the returned HTTP status is 200(OK)." ];
         fhir:TestScript.setup.action.assert.response [ fhir:value "okay" ];
         fhir:TestScript.setup.action.assert.warningOnly [ fhir:value "false"^^xsd:boolean ]
       ]
     ], [
       fhir:index 2;
       fhir:TestScript.test.action.assert [
         fhir:TestScript.setup.action.assert.description [ fhir:value "Confirm that the returned format is XML." ];
         fhir:TestScript.setup.action.assert.contentType [ fhir:value "xml" ];
         fhir:TestScript.setup.action.assert.warningOnly [ fhir:value "false"^^xsd:boolean ]
       ]
     ], [
       fhir:index 3;
       fhir:TestScript.test.action.assert [
         fhir:TestScript.setup.action.assert.description [ fhir:value "Confirm that the returned resource type is CapabilityStatement." ];
         fhir:TestScript.setup.action.assert.resource [ fhir:value "Bundle" ];
         fhir:TestScript.setup.action.assert.warningOnly [ fhir:value "false"^^xsd:boolean ]
       ]
     ]
  ] .

# - ontology header ------------------------------------------------------------

<http://medigree.net/fhir/fhir-testing/TestScript/TS1.ttl> a owl:Ontology;
  owl:imports fhir:fhir.ttl .

# -------------------------------------------------------------------------------------

